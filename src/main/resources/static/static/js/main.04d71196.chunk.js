(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{170:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),l=(a(64),a(7)),s=a.n(l),u=a(9),i=a(8),m=(a(66),a(16)),d=a(20),p=a(173),f=a(174),g=a(175),E=a(176),v=a(177);a(67);var b=function(e){return r.a.createElement("div",{className:"ProductCard m-1 p-2 ".concat(e.selected),onClick:function(){return e.onClick(e)}},r.a.createElement(p.a,{style:{width:"18rem"}},r.a.createElement(f.a,{top:!0,width:"100%",src:e.imageUrl,alt:e.description}),r.a.createElement(g.a,null,r.a.createElement(E.a,null,e.category),r.a.createElement(v.a,null,e.description),r.a.createElement(v.a,null,"RD$".concat(e.price)))))},h=a(198);var O=function(e){return r.a.createElement(h.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Categor\xeda"),r.a.createElement("th",null,"Descripci\xf3n"),r.a.createElement("th",null,"Total"))),r.a.createElement("tbody",null,e.products.map((function(t){return r.a.createElement("tr",{key:t.id,onClick:function(){return e.onClick(t)}},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.category),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.price))}))))};a(32),a(70);function j(e){return r.a.createElement("div",{className:"actionButtonsContainer p-1"},r.a.createElement("button",{onClick:e.onEditClick,disabled:e.disabled,className:"btn btn-secondary mr-1",title:"Editar Producto"},r.a.createElement("i",{className:"fa fa-pencil"})),r.a.createElement("button",{onClick:e.onAddClick,className:"btn btn-info mr-1",title:"Agregar Product"},r.a.createElement("i",{className:"fa fa-plus"})),r.a.createElement("button",{onClick:e.onDeleteClick,disabled:e.disabled,className:"btn btn-danger",title:"Borrar Product"},r.a.createElement("i",{className:"fa fa-trash"})))}var w=function(e){return r.a.createElement("div",{className:"Toolbar p-2 border rounded"},r.a.createElement("div",{className:"searchInputContainer p-1"},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroupPrepend2"},r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement("input",{onChange:e.onSearch,type:"text",className:"form-control",placeholder:"Buscar","aria-describedby":"inputGroupPrepend2",required:!0}))),e.noActionButtons?null:r.a.createElement(j,e))},S=a(11),C=a.n(S),k="dev",y="qa",x="prod",N={env:k,getPath:function(){switch(this.env){case k:return"http://localhost:8080";case y:case x:return"/"}},STATUS:{SUCCESS:"SUCCESS",ERROR:"ERROR"}},R=N.getPath(),U=N.STATUS,A=(U.SUCCESS,U.ERROR,{handleResponse:function(e){return Object(u.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.info("handleResponse: ",e),!e||!e.data){t.next=4;break}return a=e.data,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()},getProducts:function(){var e=this;return Object(u.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.a.get("".concat(R,"/api/product"));case 2:return a=t.sent,t.abrupt("return",e.handleResponse(a));case 4:case"end":return t.stop()}}),t)})))()},getProductById:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("deliverypp_user_login_token"),r={Authorization:"Bearer ".concat(n)},a.next=4,C.a.get("".concat(R,"/api/product/").concat(e),{headers:r});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()},addProduct:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("deliverypp_user_login_token"),r={Authorization:"Bearer ".concat(n)},a.next=4,C.a.post("".concat(R,"/api/product"),e,{headers:r});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()},deleteProductById:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("deliverypp_user_login_token"),r={Authorization:"Bearer ".concat(n)},a.next=4,C.a.delete("".concat(R,"/api/product/").concat(e),{headers:r});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()}}),I=a(197),P=a(178),_=a(179),T=a(180),B=a(181);var L=function(e){return r.a.createElement("div",null,r.a.createElement(I.a,{isOpen:e.showModal},r.a.createElement(P.a,{toggle:e.toggle},e.title),r.a.createElement(_.a,null,e.children),r.a.createElement(T.a,null,r.a.createElement(B.a,{color:"success",onClick:e.onSave},"Guardar")," ",r.a.createElement(B.a,{color:"secondary",onClick:e.onCancel},"Cancelar"))))},D=a(182),q=a(183);function z(e){var t=e.product.imageUrl?e.product.imageUrl:"product.png";return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(f.a,{top:!0,width:"100%",src:t}),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(D.a,{type:"text",name:"category",id:"category",placeholder:"Categor\xeda",value:e.product.category,onChange:function(t){var a=t.target.value,n=Object(m.a)({},e.product);n.category=a,e.onProductUpdate(n)}})),r.a.createElement(v.a,null,r.a.createElement(q.a,{for:"imageUrl"},"URL de la imagen"),r.a.createElement(D.a,{type:"url",name:"imageUrl",id:"imageUrl",value:t,onChange:function(t){var a=t.target.value;a||(a="product.png");var n=Object(m.a)({},e.product);n.imageUrl=a,e.onProductUpdate(n)}})),r.a.createElement(v.a,null,r.a.createElement(q.a,{for:"description"},"Descripci\xf3n"),r.a.createElement(D.a,{type:"textarea",name:"description",id:"description",value:e.product.description,onChange:function(t){var a=t.target.value,n=Object(m.a)({},e.product);n.description=a,e.onProductUpdate(n)}})),r.a.createElement(v.a,null,r.a.createElement(D.a,{type:"number",name:"price",id:"price",placeholder:"Precio",value:e.product.price,onChange:function(t){var a=t.target.value,n=Object(m.a)({},e.product);n.price=a,e.onProductUpdate(n)}})))))}var M=function(e){var t=e.showAlert,a=Object(n.useState)(!0),c=Object(i.a)(a,2),o=c[0],l=(c[1],Object(n.useState)(-1)),m=Object(i.a)(l,2),p=m[0],f=m[1],g=Object(n.useState)([]),E=Object(i.a)(g,2),v=E[0],h=E[1],j=Object(n.useState)([]),S=Object(i.a)(j,2),C=S[0],k=S[1],y=Object(n.useState)(!1),x=Object(i.a)(y,2),N=x[0],R=x[1],U=Object(n.useState)("add"),I=Object(i.a)(U,2),P=I[0],_=I[1],T=Object(n.useState)({description:"",price:0,imageUrl:"",category:""}),B=Object(i.a)(T,2),D=B[0],q=B[1],M=Object(n.useState)(""),F=Object(i.a)(M,2),G=F[0],H=F[1],J=function(){var e=Object(u.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getProducts();case 2:a=e.sent,console.log("in getProducts responseData",a),a&&"SUCCESS"===a.status?(n=a.response,h(n),k(n)):(console.log("Error getting products"),t({color:"warning",message:"Error obteniendo productos."}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(s.a.mark((function e(){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.addProduct(D);case 2:(a=e.sent)&&"SUCCESS"===a.status?(n=a.response,console.log("creatProduct ",n),r=[n].concat(Object(d.a)(v)),h(r),console.log("filter",G),K(r,G),t({color:"success",message:"Producto agregado."})):(console.log("Error getting products"),t({color:"warning",message:"Error agregando producto."}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){J()}),[0===v.length]);var W=function(e){q(e),f(e.id)},$=function(){var e=Object(u.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Seguro quiere borrar el producto seleccionado?")){e.next=6;break}return e.next=4,A.deleteProductById(p);case 4:(a=e.sent)&&"SUCCESS"===a.status?(t({color:"success",message:"Producto eliminado."}),console.log("products before filtering: ",Object(d.a)(v)),n=v.filter((function(e){return e.id!=p})),console.log("products after filtering: ",Object(d.a)(n)),h(n),console.log("filter",G),K(n,G)):(console.log("Error deleting product."),t({color:"warning",message:"Error eliminando producto."}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e,t){if(t){var a=e.filter((function(e){for(var a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];if("category"===r||"price"===r||"description"===r){var c=e[r];if(c&&(c=""+c).includes(t))return!0}}}));console.log("in value filteredProducts",Object(d.a)(a)),k(a)}else console.log("outside value products",Object(d.a)(e)),k(e)};return r.a.createElement("div",{className:"ProductView"},r.a.createElement(L,{onSave:function(){V(),R(!1)},onCancel:function(){R(!1)},showModal:N,toggle:function(){R(!N)},title:function(){switch(P){case"add":return"Agregar un producto";case"edit":return"Editar un producto"}}()},r.a.createElement(z,{imageUrl:"product.png",onProductUpdate:function(e){q(e)},product:D})),!1,r.a.createElement(w,{onSearch:function(e){var t=e.target.value;H(t),K(v,t)},onEditClick:function(){_("edit"),R(!0)},onAddClick:function(){_("add"),q({description:"",price:0,imageUrl:"",category:""}),R(!0)},onDeleteClick:$,disabled:-1==p}),r.a.createElement("div",null,o?r.a.createElement("div",{className:"ProductCardContainer"},C.map((function(e){var t=e.id==p?"selected":"";return r.a.createElement(b,Object.assign({key:e.id},e,{onClick:W,selected:t}))}))):r.a.createElement("div",{className:"ProductTableContainer"},r.a.createElement(O,{products:C}))))};var F=function(e){return r.a.createElement(h.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Usuario"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Tel\xe9fono"),r.a.createElement("th",null,"Fecha"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Estado"),r.a.createElement("th",null,"Comentario"))),r.a.createElement("tbody",null,e.orders.map((function(t){return r.a.createElement("tr",{key:t.id,onClick:function(){return e.onRowClick(t)}},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.user.username),r.a.createElement("td",null,t.user.email),r.a.createElement("td",null,t.user.telephone),r.a.createElement("td",null,t.createdAt),r.a.createElement("td",null,t.total),r.a.createElement("td",null,t.status),r.a.createElement("td",null,t.comment))}))))},G=N.getPath(),H=N.STATUS,J=(H.SUCCESS,H.ERROR,{handleResponse:function(e){if(console.info("handleResponse: ",e),e&&e.data)return e.data},getOrders:function(){var e=this;return Object(u.a)(s.a.mark((function t(){var a,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("deliverypp_user_login_token"),n={Authorization:"Bearer ".concat(a)},console.log("headers",n),t.next=5,C.a.get("".concat(G,"/api/order"),{headers:n});case 5:return r=t.sent,t.abrupt("return",e.handleResponse(r));case 7:case"end":return t.stop()}}),t)})))()},getOrderById:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("deliverypp_user_login_token"),r={Authorization:"Bearer ".concat(n)},a.next=4,C.a.get("".concat(G,"/api/order/").concat(e),{headers:r});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()},addOrder:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("deliverypp_user_login_token"),r={Authorization:"Bearer ".concat(n)},a.next=4,C.a.post("".concat(G,"/api/order"),e,{headers:r});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()}});a(95);var V=function(e){var t=e.showAlert,a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(-1),E=Object(i.a)(g,2),v=(E[0],E[1]),b=function(){var e=Object(u.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.getOrders();case 2:(a=e.sent)&&"SUCCESS"===a.status?(n=a.response,l(n),f(n)):(console.log("Error getting orders."),t({color:"warning",message:"Error getting orders."}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){b()}),[0===o.length]),r.a.createElement("div",{className:"OrderView"},r.a.createElement("div",null,r.a.createElement(w,{onSearch:function(e){var t=e.target.value;if(t){var a=o.filter((function(e){for(var a=0,n=Object.keys(e);a<n.length;a++){var r=e[n[a]];if(r&&(r=""+r).includes(t))return!0}}));f(a)}else f(o)},noActionButtons:!0})),r.a.createElement("div",{className:"orderTableContainer mt-1"},r.a.createElement(F,{orders:p,onRowClick:function(e){v(e.id)}})))},W=a(184),$=a(185),K=a(186),Q=a(187),X=a(188);var Y=function(e){var t=e.showAlert,a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(-1),E=Object(i.a)(g,2),v=E[0],h=E[1],O=Object(n.useState)({}),j=Object(i.a)(O,2),w=(j[0],j[1]),S=function(){var e=Object(u.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getProducts();case 2:"SUCCESS"===(a=e.sent).status?(n=a.response,l(n),f(n)):(console.log("Error getting products"),t({color:"warning",message:"Error obteniendo productos."}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){S()}),[0===o.length]);var C=function(e){w(e),h(e.id)};return r.a.createElement("div",{className:"ProductCardContainer"},p.map((function(e){var t=e.id==v?"selected":"";return r.a.createElement(b,Object.assign({key:e.id},e,{onClick:C,selected:t}))})))};var Z=function(e){var t=Object(n.useState)("available_products"),a=Object(i.a)(t,2),c=a[0],o=a[1],l=function(e){c!==e&&o(e)};return r.a.createElement("div",{className:"container-md p-1 border mb-8"},r.a.createElement(Q.a,{tabs:!0},r.a.createElement(W.a,null,r.a.createElement($.a,{style:{cursor:"pointer"},className:"available_products"===c?"active":"",onClick:function(){l("available_products")}},"Productos Disponibles")),e.isUserLoggedIn&&"ADMIN"===e.user.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement($.a,{style:{cursor:"pointer"},className:"product"===c?"active":"",onClick:function(){l("product")}},"Productos")),r.a.createElement(W.a,null,r.a.createElement($.a,{style:{cursor:"pointer"},className:"orders"===c?"active":"",onClick:function(){l("orders")}},"Ordenes")))),r.a.createElement(X.a,{activeTab:c},r.a.createElement(K.a,{tabId:"available_products"},r.a.createElement(Y,{showAlert:e.showAlert})),e.isUserLoggedIn&&"ADMIN"===e.user.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{tabId:"product"},r.a.createElement(M,{showAlert:e.showAlert})),r.a.createElement(K.a,{tabId:"orders"},r.a.createElement(V,{showAlert:e.showAlert})))))},ee=a(189),te=a(190);var ae=function(e){var t=e.onSignInClick,a=e.onLogOutClick,n=e.isUserLoggedIn,c=e.user;return r.a.createElement("div",{className:"NavBar"},r.a.createElement(ee.a,{color:"light",light:!0,expand:"md"},r.a.createElement(te.a,{href:"/"},r.a.createElement("span",{style:{color:"#940205"}},"Deliverypp")),r.a.createElement(Q.a,{className:"mr-auto",navbar:!0},r.a.createElement(W.a,null,r.a.createElement($.a,{href:"/products"},"Productos"))),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"mr-1"},c.name),r.a.createElement(B.a,{outline:!0,title:"Salir",onClick:a,className:"mr-1"},r.a.createElement("i",{className:"fas fa-sign-out-alt"}))):r.a.createElement(B.a,{outline:!0,title:"Entrar",onClick:t,className:"mr-1"},r.a.createElement("i",{className:"fas fa-sign-in-alt"}))))};a(96);var ne=function(){return r.a.createElement("footer",{className:"Footer"},r.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2020 Copyright:",r.a.createElement("a",{href:""}," Deliverypp.com")))},re=a(192),ce=a(193),oe=a(194),le=a(195),se=N.getPath(),ue=N.STATUS,ie=(ue.SUCCESS,ue.ERROR,{handleResponse:function(e){if(console.info("handleResponse: ",e),e&&e.data)return e.data},register:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.a.post("".concat(se,"/api/register"),e);case 2:return n=a.sent,r=t.handleResponse(n),a.abrupt("return",r);case 5:case"end":return a.stop()}}),a)})))()},login:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.a.post("".concat(se,"/api/login"),e);case 2:return n=a.sent,r=t.handleResponse(n),a.abrupt("return",r);case 5:case"end":return a.stop()}}),a)})))()},getUserByToken:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={Authorization:"Bearer ".concat(e)},a.next=3,C.a.get("".concat(se,"/api/auth/").concat(e),n);case 3:return r=a.sent,c=t.handleResponse(r),a.abrupt("return",c);case 6:case"end":return a.stop()}}),a)})))()},logout:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var n,r,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={Authorization:"Bearer ".concat(e)},a.next=3,C.a.get("".concat(se,"/api/auth/").concat(e),n);case 3:return r=a.sent,c=t.handleResponse(r),a.abrupt("return",c);case 6:case"end":return a.stop()}}),a)})))()}}),me=a(191);a(44);var de=function(e){return r.a.createElement("div",{className:"Loader"},r.a.createElement(me.a,{color:"light",style:{width:"4rem",height:"4rem"}}),r.a.createElement("span",{style:{color:"#fff"}}," Espere..."))};var pe=function(e){var t=e.onLogin,a=void 0===t?function(){}:t,c=Object(n.useState)({username:!1,password:!1}),o=Object(i.a)(c,2),l=o[0],d=o[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),g=f[0],E=f[1],v=Object(n.useState)(""),b=Object(i.a)(v,2),h=b[0],O=b[1],j=Object(n.useState)(!1),w=Object(i.a)(j,2),S=w[0],C=w[1],k=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:g,password:h},C(!0),e.next=5,ie.login(n);case 5:r=e.sent,setTimeout((function(){C(!1),a(r)}),1e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){if(!l[e]){var t=Object(m.a)({},l);t[e]=!0,d(t)}},x=!!g,N=!!h&&h.length>5;return r.a.createElement(re.a,{className:"form position-relative p-2"},S&&r.a.createElement(de,null),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(q.a,{for:"username"},"Usuario"),r.a.createElement(D.a,{valid:l.username&&x,invalid:l.username&&!x,type:"text",name:"username",id:"username",value:g,onChange:function(e){y("username");var t=e.target.value;E(t)}}),l.username&&r.a.createElement(le.a,null,"El nombre de usuario no puede estar vac\xedo."))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(q.a,{for:"password"},"Contrase\xf1a"),r.a.createElement(D.a,{valid:l.password&&N,invalid:l.password&&!N,type:"password",name:"password",id:"examplePassword",placeholder:"********",value:h,onChange:function(e){y("password");var t=e.target.value;O(t)}}),l.password&&r.a.createElement(le.a,null,"Introduce una contrase\xf1a de m\xe1s de 5 caracteres."))),r.a.createElement(B.a,{disabled:!(x&&N),onClick:k},"Entrar"))},fe=a(57),ge=a.n(fe);var Ee=function(e){var t=e.onRegister,a=void 0===t?function(){}:t,c=Object(n.useState)({username:!1,email:!1,password:!1,name:!1,telephone:!1}),o=Object(i.a)(c,2),l=o[0],d=o[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),g=f[0],E=f[1],v=Object(n.useState)(""),b=Object(i.a)(v,2),h=b[0],O=b[1],j=Object(n.useState)(""),w=Object(i.a)(j,2),S=w[0],C=w[1],k=Object(n.useState)(""),y=Object(i.a)(k,2),x=y[0],N=y[1],R=Object(n.useState)(""),U=Object(i.a)(R,2),A=U[0],I=U[1],P=Object(n.useState)(""),_=Object(i.a)(P,2),T=_[0],L=_[1],z=Object(n.useState)(!1),M=Object(i.a)(z,2),F=M[0],G=M[1],H=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:x,username:g,email:h,password:S,lastName:A,telephone:T},G(!0),e.next=5,ie.register(n);case 5:(r=e.sent)&&r.token&&localStorage.setItem("deliverypp_user_login_token",r.token),J(),setTimeout((function(){G(!1),a(r)}),1e3);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){E(""),O(""),C(""),N(""),I(""),L(""),d({username:!1,email:!1,password:!1,name:!1,telephone:!1})},V=function(e){if(!l[e]){var t=Object(m.a)({},l);t[e]=!0,d(t)}},W=!!h&&ge.a.isEmail(h),$=!!g,K=!!x,Q=!!S&&S.length>5,X=!!T&&10===T.length;return r.a.createElement(re.a,{className:"form position-relative p-2"},F&&r.a.createElement(de,null),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(q.a,{for:"username"},"Usuario"),r.a.createElement(D.a,{valid:l.username&&$,invalid:l.username&&!$,type:"text",name:"username",id:"username",required:!0,value:g,onChange:function(e){V("username");var t=e.target.value;E(t)}}),l.username&&r.a.createElement(le.a,null,"El nombre de usuario no puede estar vac\xedo."))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(q.a,{for:"email"},"Email"),r.a.createElement(D.a,{valid:l.email&&W,invalid:l.email&&!W,type:"email",name:"email",id:"exampleEmail",placeholder:"youremail@email.com",required:!0,value:h,onChange:function(e){V("email");var t=e.target.value;O(t)}}),l.email&&r.a.createElement(le.a,null,"Introduce un email v\xe1lido."))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(q.a,{for:"password"},"Contrase\xf1a"),r.a.createElement(D.a,{valid:l.password&&Q,invalid:l.password&&!Q,type:"password",name:"password",id:"password",placeholder:"********",value:S,onChange:function(e){V("password");var t=e.target.value;C(t)},required:!0}),l.password&&r.a.createElement(le.a,null,"Introduce una contrase\xf1a de m\xe1s de 5 caracteres."))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(q.a,{for:"name"},"Nombre"),r.a.createElement(D.a,{valid:l.name&&K,invalid:l.name&&!K,type:"text",name:"name",id:"name",value:x,onChange:function(e){V("name");var t=e.target.value;N(t)},required:!0}),l.name&&r.a.createElement(le.a,null,"El nombre no puede estar vac\xedo."))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(q.a,{for:"lastname"},"Apellido"),r.a.createElement(D.a,{type:"text",name:"lastname",id:"lastname",value:A,onChange:function(e){var t=e.target.value;I(t)},required:!0}))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(q.a,{for:"telephone"},"Tel\xe9fono"),r.a.createElement(D.a,{valid:l.telephone&&X,invalid:l.telephone&&!X,type:"number",name:"telephone",id:"telephone",value:T,onChange:function(e){V("telephone");var t=e.target.value;L(t)},placeholder:"8095005000",required:!0}),l.name&&r.a.createElement(le.a,null,"Introduce un tel\xe9fono v\xe1lido."))),r.a.createElement(B.a,{disabled:!(W&&$&&K&&Q&&X),onClick:H},"Registrarse"))};a(170);var ve=function(e){var t=Object(n.useState)("login"),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=(s[0],s[1],Object(n.useState)("Registered")),m=Object(i.a)(u,2),d=(m[0],m[1],Object(n.useState)("info")),p=Object(i.a)(d,2),f=(p[0],p[1],function(e){c!==e&&o(e)}),g="grey",E="grey";"login"===c?g=e.color:"register"===c&&(E=e.color);var v=function(t){t?"ERROR"===t.status?e.showAlert({color:"warning",message:t.message}):"SUCCESS"===t.status?e.showAlert({color:"info",message:t.message}):e.showAlert({color:"warning",message:"Hubo un error durante el registro. Trata luego."}):e.showAlert({color:"warning",message:"Hubo un error durante el registro. Trata luego."})};return r.a.createElement("div",{className:"RegisterLoginTab"},r.a.createElement(I.a,{isOpen:e.showModal},r.a.createElement(P.a,{toggle:e.toggle},"Entrar"),r.a.createElement(_.a,null,r.a.createElement(Q.a,{tabs:!0},r.a.createElement(W.a,null,r.a.createElement($.a,{style:{cursor:"pointer"},className:"login"===c?"active":"",onClick:function(){f("login")}},"Entrar ",r.a.createElement("i",{className:"fas fa-user",style:{color:g}}))),r.a.createElement(W.a,null,r.a.createElement($.a,{style:{cursor:"pointer"},className:"register"===c?"active":"",onClick:function(){f("register")}},"Registrarse ",r.a.createElement("i",{className:"fas fa-sign-in-alt",style:{color:E}})))),r.a.createElement(X.a,{activeTab:c},r.a.createElement(K.a,{tabId:"login"},r.a.createElement(pe,{onLogin:function(t){if(v(t),t&&t.response){var a=t.response;a.token&&(localStorage.setItem("deliverypp_user_login_token",a.token),e.toggle(),e.onLogin(a.user))}},color:e.color})),r.a.createElement(K.a,{tabId:"register"},r.a.createElement(Ee,{onRegister:function(e){v(e),o("login")},color:e.color}))))))},be=a(196);var he=function(e){return r.a.createElement("div",{className:"Loader"},r.a.createElement(me.a,{type:"grow",color:"dark",style:{width:"4rem",height:"4rem"}}),r.a.createElement("span",{style:{color:"#fff"}}," Espere..."))};var Oe=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),m=l[0],d=l[1],p=Object(n.useState)("Registered"),f=Object(i.a)(p,2),g=f[0],E=f[1],v=Object(n.useState)("info"),b=Object(i.a)(v,2),h=b[0],O=b[1],j=Object(n.useState)(!0),w=Object(i.a)(j,2),S=w[0],C=w[1],k=Object(n.useState)(!1),y=Object(i.a)(k,2),x=y[0],N=y[1],R=Object(n.useState)({}),U=Object(i.a)(R,2),A=U[0],I=U[1];Object(n.useEffect)((function(){var e=localStorage.getItem("deliverypp_user_login_token");x||function(){var t=Object(u.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.next=3,ie.getUserByToken(e);case 3:(a=t.sent)&&a.response?(n=a.response,"SUCCESS"===a.status&&(I(n),N(!0))):N(!1),setTimeout((function(){C(!1)}),1e3),t.next=11;break;case 8:N(!1),setTimeout((function(){C(!1)}),1e3),N(!1);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[x]);var P=function(e){var t=e.color,a=e.message;O(t),E(a),d(!0),setTimeout((function(){O("info"),d(!1),E("")}),3e3)};return S?r.a.createElement(he,null):r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"alertContainer"},r.a.createElement(be.a,{color:h,isOpen:m,toggle:function(){d(!1)}},g)),r.a.createElement(ae,{isUserLoggedIn:x,user:A,onSignInClick:function(){return c(!0)},onLogOutClick:function(){C(!0);var e=localStorage.getItem("deliverypp_user_login_token");ie.logout(e),localStorage.removeItem("deliverypp_user_login_token"),I({}),N(!1),setTimeout((function(){C(!1)}),1e3)},color:"#940205"}),a&&r.a.createElement(ve,{showModal:a,toggle:function(){c(!a)},color:"#940205",showAlert:P,onLogin:function(e){C(!0),I(e),N(!0),setTimeout((function(){C(!1)}),1e3)}}),r.a.createElement(Z,{showAlert:P,color:"#940205",isUserLoggedIn:x,user:A}),r.a.createElement(ne,{color:"#940205"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(171);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},32:function(e,t,a){},44:function(e,t,a){},59:function(e,t,a){e.exports=a(172)},64:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},70:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.04d71196.chunk.js.map