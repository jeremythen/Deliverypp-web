(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{124:function(e,t,a){},198:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),o=a.n(c),l=(a(78),a(7)),s=a.n(l),u=a(9),i=a(8),d=(a(80),a(17)),m=a(26),p=a(204),g=a(205),f=a(206),E=a(207),v=a(208);a(81);var h=function(e){return n.a.createElement("div",{className:"ProductCard m-1 p-2 ".concat(e.selected),onClick:function(){return e.onClick(e)}},n.a.createElement(p.a,{style:{width:"18rem"}},n.a.createElement(g.a,{top:!0,width:"100%",src:e.imageUrl,alt:e.description}),n.a.createElement(f.a,null,n.a.createElement(E.a,null,e.category),n.a.createElement(v.a,null,e.description),n.a.createElement(v.a,null,"RD$".concat(e.price)))))},b=a(230);var O=function(e){return n.a.createElement(b.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Id"),n.a.createElement("th",null,"Categor\xeda"),n.a.createElement("th",null,"Descripci\xf3n"),n.a.createElement("th",null,"Total"))),n.a.createElement("tbody",null,e.products.map((function(t){return n.a.createElement("tr",{key:t.id,onClick:function(){return e.onClick(t)}},n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.category),n.a.createElement("td",null,t.description),n.a.createElement("td",null,t.price))}))))};a(41),a(84);function w(e){return n.a.createElement("div",{className:"actionButtonsContainer p-1"},n.a.createElement("button",{onClick:e.onEditClick,disabled:e.disabled,className:"btn btn-secondary mr-1",title:"Editar Producto"},n.a.createElement("i",{className:"fa fa-pencil"})),n.a.createElement("button",{onClick:e.onAddClick,className:"btn btn-info mr-1",title:"Agregar Product"},n.a.createElement("i",{className:"fa fa-plus"})),n.a.createElement("button",{onClick:e.onDeleteClick,disabled:e.disabled,className:"btn btn-danger",title:"Borrar Product"},n.a.createElement("i",{className:"fa fa-trash"})))}var j=function(e){return n.a.createElement("div",{className:"Toolbar p-2 border rounded"},n.a.createElement("div",{className:"searchInputContainer p-1"},n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"inputGroupPrepend2"},n.a.createElement("i",{className:"fa fa-search"}))),n.a.createElement("input",{onChange:e.onSearch,type:"text",className:"form-control",placeholder:"Buscar","aria-describedby":"inputGroupPrepend2",required:!0}))),e.noActionButtons?null:n.a.createElement(w,e))},C=a(12),k=a.n(C),y="dev",S="qa",N="prod",x={env:y,getPath:function(){switch(this.env){case y:return"";case S:case N:return"";default:console.error("Wrong operation.")}},STATUS:{SUCCESS:"SUCCESS",ERROR:"ERROR"}},I=x.getPath(),R={handleResponse:function(e){return Object(u.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.data){t.next=3;break}return a=e.data,t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})))()},getProducts:function(){var e=this;return Object(u.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.get("".concat(I,"/api/products"));case 2:return a=t.sent,t.abrupt("return",e.handleResponse(a));case 4:case"end":return t.stop()}}),t)})))()},getProductById:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=localStorage.getItem("deliverypp_user_login_token"),n={Authorization:"Bearer ".concat(r)},a.next=4,k.a.get("".concat(I,"/api/products/").concat(e),{headers:n});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()},addProduct:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=localStorage.getItem("deliverypp_user_login_token"),n={Authorization:"Bearer ".concat(r)},a.next=4,k.a.post("".concat(I,"/api/products"),e,{headers:n});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()},updateProduct:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=localStorage.getItem("deliverypp_user_login_token"),n={Authorization:"Bearer ".concat(r)},a.next=4,k.a.put("".concat(I,"/api/products"),e,{headers:n});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()},deleteProductById:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=localStorage.getItem("deliverypp_user_login_token"),n={Authorization:"Bearer ".concat(r)},a.next=4,k.a.delete("".concat(I,"/api/products/").concat(e),{headers:n});case 4:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 6:case"end":return a.stop()}}),a)})))()}},A=a(229),P=a(209),_=a(210),T=a(211),D=a(212);var U=function(e){return n.a.createElement("div",null,n.a.createElement(A.a,{isOpen:e.showModal},n.a.createElement(P.a,{toggle:e.toggle},e.title),n.a.createElement(_.a,null,e.children),n.a.createElement(T.a,null,n.a.createElement(D.a,{color:"success",onClick:e.onSave},"Guardar")," ",n.a.createElement(D.a,{color:"secondary",onClick:e.onCancel},"Cancelar"))))},L=a(213),B=a(214);function M(e){var t=e.product.imageUrl?e.product.imageUrl:"product.png";return n.a.createElement("div",null,n.a.createElement(p.a,null,n.a.createElement(g.a,{top:!0,width:"100%",src:t}),n.a.createElement(f.a,null,n.a.createElement(E.a,null,n.a.createElement(L.a,{type:"text",name:"category",id:"category",placeholder:"Categor\xeda",value:e.product.category,onChange:function(t){var a=t.target.value,r=Object(d.a)({},e.product);r.category=a,e.onProductUpdate(r)}})),n.a.createElement(v.a,null,n.a.createElement(B.a,{for:"imageUrl"},"URL de la imagen"),n.a.createElement(L.a,{type:"url",name:"imageUrl",id:"imageUrl",value:t,onChange:function(t){var a=t.target.value;a||(a="product.png");var r=Object(d.a)({},e.product);r.imageUrl=a,e.onProductUpdate(r)}})),n.a.createElement(v.a,null,n.a.createElement(B.a,{for:"description"},"Descripci\xf3n"),n.a.createElement(L.a,{type:"textarea",name:"description",id:"description",value:e.product.description,onChange:function(t){var a=t.target.value,r=Object(d.a)({},e.product);r.description=a,e.onProductUpdate(r)}})),n.a.createElement(v.a,null,n.a.createElement(L.a,{type:"number",name:"price",id:"price",placeholder:"Precio",value:e.product.price,onChange:function(t){var a=t.target.value,r=Object(d.a)({},e.product);r.price=a,e.onProductUpdate(r)}})))))}var q=function(e){var t=e.showAlert,a=Object(r.useState)(!0),c=Object(i.a)(a,2),o=c[0],l=(c[1],Object(r.useState)(-1)),d=Object(i.a)(l,2),p=d[0],g=d[1],f=Object(r.useState)([]),E=Object(i.a)(f,2),v=E[0],b=E[1],w=Object(r.useState)([]),C=Object(i.a)(w,2),k=C[0],y=C[1],S=Object(r.useState)(!1),N=Object(i.a)(S,2),x=N[0],I=N[1],A=Object(r.useState)("add"),P=Object(i.a)(A,2),_=P[0],T=P[1],D=Object(r.useState)({description:"",price:0,imageUrl:"",category:""}),L=Object(i.a)(D,2),B=L[0],q=L[1],z=Object(r.useState)(""),G=Object(i.a)(z,2),H=G[0],W=G[1],F=function(){var e=Object(u.a)(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getProducts();case 2:(a=e.sent)&&a.success?(r=a.response,b(r),y(r)):(console.log("Error getting products"),t({color:"warning",message:"Error obteniendo productos."}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(s.a.mark((function e(){var a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.addProduct(B);case 2:(a=e.sent)&&a.success?(r=a.response,n=[r].concat(Object(m.a)(v)),b(n),$(n,H),t({color:"success",message:"Producto agregado."}),I(!1)):(console.log("Error getting products"),t({color:"warning",message:"Error agregando producto."}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(s.a.mark((function e(){var a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.updateProduct(B);case 2:(a=e.sent)&&a.success?(r=a.response,(n=Object(m.a)(v)).forEach((function(e){if(e.id===r.id)return e.description=r.description,e.price=r.price,e.category=r.category,e.imageUrl=r.imageUrl,!1})),b(n),$(n,H),t({color:"success",message:"Producto agregado."}),I(!1)):(console.log("Error getting products"),t({color:"warning",message:"Error agregando producto."}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){F()}),[]);var J=function(e){q(e),g(e.id)},K=function(){var e=Object(u.a)(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Seguro quiere borrar el producto seleccionado?")){e.next=6;break}return e.next=4,R.deleteProductById(p);case 4:(a=e.sent)&&a.success?(t({color:"success",message:"Producto eliminado."}),r=v.filter((function(e){return e.id!==p})),b(r),$(r,H)):(console.log("Error deleting product."),t({color:"warning",message:"Error eliminando producto."}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e,t){if(t){var a=e.filter((function(e){for(var a=0,r=Object.keys(e);a<r.length;a++){var n=r[a];if("category"===n||"price"===n||"description"===n){var c=e[n];if(c&&(c=""+c).includes(t))return!0}}return!1}));y(a)}else y(e)};return n.a.createElement("div",{className:"ProductView"},n.a.createElement(U,{onSave:function(){switch(_){case"add":Q();break;case"edit":V();break;default:console.error("Wrong operation.")}},onCancel:function(){I(!1)},showModal:x,toggle:function(){I(!x)},title:function(){switch(_){case"add":return"Agregar un producto";case"edit":return"Editar un producto";default:console.error("Wrong operation.")}}()},n.a.createElement(M,{imageUrl:"product.png",onProductUpdate:function(e){q(e)},product:B})),!1,n.a.createElement(j,{onSearch:function(e){var t=e.target.value;W(t),$(v,t)},onEditClick:function(){T("edit"),I(!0)},onAddClick:function(){T("add"),q({description:"",price:0,imageUrl:"",category:""}),I(!0)},onDeleteClick:K,disabled:-1===p}),n.a.createElement("div",null,o?n.a.createElement("div",{className:"ProductCardContainer"},k.map((function(e){var t=e.id===p?"selected":"";return n.a.createElement(h,Object.assign({key:e.id},e,{onClick:J,selected:t}))}))):n.a.createElement("div",{className:"ProductTableContainer"},n.a.createElement(O,{products:k}))))},z=a(215),G=(a(53),{statusMap:{ORDERED:"danger",PAID:"info",ACQUIRING:"secondary",ACQUIRED:"primary",TRANSIT:"warning",DELIVERED:"success"},getClassStatusClass:function(e){return this.statusMap[e]}});var H=function(e){var t=Object(r.useState)(null),a=Object(i.a)(t,2),c=a[0],o=a[1],l=function(t){e.onColumnClick(t)};return n.a.createElement("div",{className:"OrderTable"},n.a.createElement(z.a,{bordered:!0,hover:!0,responsive:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{onClick:function(){return l("id")}},"Id"),n.a.createElement("th",{onClick:function(){return l("status")}},"Estado"),n.a.createElement("th",{onClick:function(){return l("username")}},"Usuario"),n.a.createElement("th",{onClick:function(){return l("email")}},"Email"),n.a.createElement("th",{onClick:function(){return l("telephone")}},"Tel\xe9fono"),n.a.createElement("th",{onClick:function(){return l("createdAt")}},"Fecha"),n.a.createElement("th",{onClick:function(){return l("total")}},"Total"),n.a.createElement("th",{onClick:function(){return l("comment")}},"Comentario"))),n.a.createElement("tbody",null,e.orders.map((function(t){return n.a.createElement("tr",{className:"order-row ".concat(c&&c.id===t.id?"selected":""),key:t.id,onClick:function(){return function(t){o(t),e.onRowClick(t.id)}(t)}},n.a.createElement("td",null,t.id),n.a.createElement("td",{className:"text-".concat(G.getClassStatusClass(t.status))},function(e){switch(e){case"ORDERED":return"Ordenado";case"PAID":return"Pagado";case"ACQUIRING":return"Adquiriendo";case"ACQUIRED":return"Adquirido";case"TRANSIT":return"En Tr\xe1nsito";case"DELIVERED":return"Entregado";default:return""}}(t.status)),n.a.createElement("td",null,t.username),n.a.createElement("td",null,t.email),n.a.createElement("td",null,t.telephone),n.a.createElement("td",null,t.createdAt),n.a.createElement("td",null,t.total),n.a.createElement("td",null,t.comment))})))))},W=x.getPath(),F={generateErrorResponse:function(e){return{success:!1,status:"ERROR",message:e}},handleResponse:function(e){if(e&&e.data)return e.data},getOrders:function(){var e=this;return Object(u.a)(s.a.mark((function t(){var a,r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("deliverypp_user_login_token"),r={Authorization:"Bearer ".concat(a)},t.next=5,k.a.get("".concat(W,"/api/orders"),{headers:r});case 5:return n=t.sent,t.abrupt("return",e.handleResponse(n));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",e.generateErrorResponse(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getOrderById:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=localStorage.getItem("deliverypp_user_login_token"),n={Authorization:"Bearer ".concat(r)},a.next=5,k.a.get("".concat(W,"/api/orders/").concat(e),{headers:n});case 5:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 9:return a.prev=9,a.t0=a.catch(0),a.abrupt("return",t.generateErrorResponse(a.t0.message));case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},addOrder:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=localStorage.getItem("deliverypp_user_login_token"),n={Authorization:"Bearer ".concat(r)},a.next=5,k.a.post("".concat(W,"/api/orders"),e,{headers:n});case 5:return c=a.sent,a.abrupt("return",t.handleResponse(c));case 9:return a.prev=9,a.t0=a.catch(0),a.abrupt("return",t.generateErrorResponse(a.t0.message));case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},updateStatus:function(e,t){var a=this;return Object(u.a)(s.a.mark((function r(){var n,c,o;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=localStorage.getItem("deliverypp_user_login_token"),c={Authorization:"Bearer ".concat(n)},r.next=5,k.a.put("".concat(W,"/api/orders/").concat(e,"/status/").concat(t),{headers:c});case 5:return o=r.sent,r.abrupt("return",a.handleResponse(o));case 9:return r.prev=9,r.t0=r.catch(0),r.abrupt("return",a.generateErrorResponse(r.t0.message));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()}},Q=a(216),V=a(217),J=a(218),K=a(219),$=a(220),X=a(24),Y={id:!1,username:!1,email:!1,telephone:!1,createdAt:!1,total:!1,comment:!1};function Z(e){var t=e.onClose,a=e.showModal,c=e.toggleShowModal,o=e.orderLines,l=e.orderId,d=e.location,m=e.orderStatus,p=e.showAlert,g=e.onOrderStatusChange;console.log("orderId, orderStatus",l,m);var f=Object(r.useState)("orderProductsDetails"),E=Object(i.a)(f,2),h=E[0],b=E[1],O=function(e){h!==e&&b(e)},w=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,e.next=3,F.updateStatus(l,a);case 3:(r=e.sent)&&r.success?g(l,a):(console.log("Error updating status."),p({color:"warning",message:"Error actualizando el estado."}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",null,n.a.createElement(A.a,{isOpen:a},n.a.createElement(P.a,{toggle:c},n.a.createElement(v.a,null,"Order #: ",l),n.a.createElement(v.a,null,"Productos ordenados"),n.a.createElement(te,{orderStatus:m,onOrderStatusChange:w})),n.a.createElement(_.a,null,n.a.createElement(Q.a,{tabs:!0},n.a.createElement(V.a,null,n.a.createElement(J.a,{style:{cursor:"pointer"},className:"orderProductsDetails"===h?"active":"",onClick:function(){return O("orderProductsDetails")}},"Productos")),n.a.createElement(V.a,null,n.a.createElement(J.a,{style:{cursor:"pointer"},className:"orderProductsLocation"===h?"active":"",onClick:function(){return O("orderProductsLocation")}},"Localizaci\xf3n"))),n.a.createElement(K.a,{activeTab:h},n.a.createElement($.a,{tabId:"orderProductsDetails"},n.a.createElement(ae,{orderLines:o})),n.a.createElement($.a,{tabId:"orderProductsLocation"},n.a.createElement(ne,{location:d})))),n.a.createElement(T.a,null,n.a.createElement(D.a,{color:"success",onClick:t},"Cerrar")," ")))}function ee(e){var t=e.onSearch,a=e.orderStatus,r=e.onOrderStatusChange;return n.a.createElement("div",{className:"Toolbar p-2 border rounded"},n.a.createElement("div",{className:"searchInputContainer p-1"},n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text",id:"inputGroupPrepend2"},n.a.createElement("i",{className:"fa fa-search"}))),n.a.createElement("input",{onChange:t,type:"text",className:"form-control",placeholder:"Buscar","aria-describedby":"inputGroupPrepend2",required:!0}),n.a.createElement("div",{className:"ml-2"},n.a.createElement(te,{orderStatus:a,onOrderStatusChange:r})))))}function te(e){var t=e.orderStatus,a=e.onOrderStatusChange;return n.a.createElement("div",{className:"d-flex flex-row justify-content-center align-items-cente mr-2"},n.a.createElement(B.a,{className:"mr-2",htmlFor:"statusSelect"},"Estado"),n.a.createElement(L.a,{style:{borderWidth:2},className:"border-".concat(G.getClassStatusClass(t)),type:"select",id:"statusSelect",value:t,onChange:a},n.a.createElement("option",{value:""}),n.a.createElement("option",{value:"ORDERED"},"Ordenado"),n.a.createElement("option",{value:"PAID"},"Pagado"),n.a.createElement("option",{value:"ACQUIRING"},"Adquiriendo"),n.a.createElement("option",{value:"ACQUIRED"},"Adquirido"),n.a.createElement("option",{value:"TRANSIT"},"En Tr\xe1nsito"),n.a.createElement("option",{value:"DELIVERED"},"Entregado")))}function ae(e){var t=e.orderLines,a=Object(r.useState)(t.map((function(e){return Object(d.a)({},e,{imageHidden:!0})}))),c=Object(i.a)(a,2),o=c[0],l=c[1],s=function(e){console.log("id",e);var t=o.map((function(t){return t.product.id===e&&(t.imageHidden=!t.imageHidden),t}));l(t)};return n.a.createElement(n.a.Fragment,null,o.map((function(e){var t=e.quantity,a=e.product,r=e.imageHidden;return n.a.createElement(p.a,{key:a.id,style:{marginBottom:4,marginTop:4}},r&&n.a.createElement("div",{className:"imageIconContainer text-center",title:"Mostrar image del producto",onClick:function(){return s(a.id)}},n.a.createElement("i",{className:"fas fa-image",style:{fontSize:24,color:"grey"}})),!r&&n.a.createElement(g.a,{top:!0,width:"100%",src:a.imageUrl,alt:a.description,onClick:function(){return s(a.id)},title:"Ocultar imagel del producto",className:"cardImgElem"}),n.a.createElement(f.a,null,n.a.createElement(E.a,null,a.description),n.a.createElement(v.a,null,"Precio RD$".concat(a.price)),n.a.createElement(v.a,null,"Cantidad ".concat(t)),n.a.createElement(v.a,null,"Total RD$".concat(a.price*t))))})))}var re={position:"relative",width:"100%",height:"100%"};var ne=Object(X.GoogleApiWrapper)({apiKey:"AIzaSyC1wC2ImcL1s4wITbDbM-g3nLK01fJHGkc"})((function(e){var t=e.google,a=e.location;return n.a.createElement("div",{style:{height:400,padding:0,position:"relative"}},n.a.createElement(X.Map,{google:t,zoom:14,style:re,initialCenter:{lat:a.latitude,lng:a.longitude}},n.a.createElement(X.Marker,{name:"Current location"})))}));var ce=Object(X.GoogleApiWrapper)({apiKey:"AIzaSyC1wC2ImcL1s4wITbDbM-g3nLK01fJHGkc"})((function(e){var t=e.google,a=e.locations;return n.a.createElement("div",{style:{height:400,padding:0,position:"relative"}},n.a.createElement(X.Map,{google:t,zoom:11,style:re,initialCenter:{lat:18.486057,lng:-69.931213}},a.map((function(e){return n.a.createElement(X.Marker,{key:e.id,title:"The marker`s title will appear as a tooltip.",name:"SOMA",position:{lat:e.latitude,lng:e.longitude}})}))))})),oe=function(e){var t=e.showAlert,a=Object(r.useState)([]),c=Object(i.a)(a,2),o=c[0],l=c[1],d=Object(r.useState)([]),p=Object(i.a)(d,2),g=p[0],f=p[1],E=Object(r.useState)({orderLines:[],locations:[]}),v=Object(i.a)(E,2),h=v[0],b=v[1],O=Object(r.useState)(!1),w=Object(i.a)(O,2),j=w[0],C=w[1],k=Object(r.useState)(""),y=Object(i.a)(k,2),S=y[0],N=y[1],x=function(e){return e.map((function(e){var t=e.user,a=t.username,r=t.email,n=t.telephone,c=e.status,o=e.id,l=e.createdAt;return{id:o,status:c,total:e.total,comment:e.comment,createdAt:l,username:a,email:r,telephone:n}}))},I=function(){var e=Object(u.a)(s.a.mark((function e(){var a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getOrders();case 2:(a=e.sent)&&a.success?(r=a.response,l(r),n=x(r),f(n)):(console.log("Error getting orders."),t({color:"warning",message:"Error getting orders."}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){I()}),[]),n.a.createElement("div",{className:"OrderView"},n.a.createElement(ce,{locations:o.map((function(e){return e.location}))}),n.a.createElement(Z,{showModal:j,toggleShowModal:function(){C(!j)},onClose:function(){C(!1)},orderLines:h.orderLines,orderId:h.id,location:h.location,orderStatus:h.status,showAlert:t,onOrderStatusChange:function(e,t){var a=o.map((function(a){return a.id===e&&(a.status=t),a}));l(a);var r=g.map((function(a){if(a.id===e){a.status=t;var r=o.find((function(t){return t.id===e}));b(r)}return a}));f(r)}}),n.a.createElement("div",null,n.a.createElement(ee,{onSearch:function(e){var t=e.target.value,a=x(o);if(t){var r=a.filter((function(e){for(var a=0,r=Object.keys(e);a<r.length;a++){var n=e[r[a]];if(n&&(n=""+n).includes(t))return!0}}));f(r)}else f(a)},orderStatus:S,onOrderStatusChange:function(e){var t=e.target.value,a=x(o);if(!t)return N(""),f(a);var r=a.filter((function(e){return e.status===t}));N(t),f(r)}})),n.a.createElement("div",{className:"Container mt-1"},n.a.createElement(H,{orders:g,onRowClick:function(e){var t=o.find((function(t){return t.id===e}));t&&(b(t),C(!0))},onColumnClick:function(e){var t=Y[e],a=function(e,t){return e<t?1:e>t?-1:0},r=x(o);r.sort((function(r,n){var c=r[e],o=n[e];return t?a(c,o):a(o,c)})),Y[e]=!t;var n=Object(m.a)(r);f(n)}})))};var le=function(e){var t=e.showAlert,a=Object(r.useState)([]),c=Object(i.a)(a,2),o=(c[0],c[1]),l=Object(r.useState)([]),d=Object(i.a)(l,2),m=d[0],p=d[1],g=Object(r.useState)(-1),f=Object(i.a)(g,2),E=f[0],v=f[1],b=Object(r.useState)({}),O=Object(i.a)(b,2),w=(O[0],O[1]),j=function(){var e=Object(u.a)(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getProducts();case 2:(a=e.sent).success?(r=a.response,o(r),p(r)):(console.log("Error getting products"),t({color:"warning",message:"Error obteniendo productos."}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){j()}),[]);var C=function(e){w(e),v(e.id)};return n.a.createElement("div",{className:"ProductCardContainer"},m.map((function(e){var t=e.id===E?"selected":"";return n.a.createElement(h,Object.assign({key:e.id},e,{onClick:C,selected:t}))})))};var se=function(e){var t=Object(r.useState)("available_products"),a=Object(i.a)(t,2),c=a[0],o=a[1],l=function(e){c!==e&&o(e)};return n.a.createElement("div",{className:"container-md p-1 border mb-8"},n.a.createElement(Q.a,{tabs:!0},n.a.createElement(V.a,null,n.a.createElement(J.a,{style:{cursor:"pointer"},className:"available_products"===c?"active":"",onClick:function(){l("available_products")}},"Productos Disponibles")),e.isUserLoggedIn&&"ADMIN"===e.user.role&&n.a.createElement(n.a.Fragment,null,n.a.createElement(V.a,null,n.a.createElement(J.a,{style:{cursor:"pointer"},className:"product"===c?"active":"",onClick:function(){l("product")}},"Productos")),n.a.createElement(V.a,null,n.a.createElement(J.a,{style:{cursor:"pointer"},className:"orders"===c?"active":"",onClick:function(){l("orders")}},"Ordenes")))),n.a.createElement(K.a,{activeTab:c},n.a.createElement($.a,{tabId:"available_products"},n.a.createElement(le,{showAlert:e.showAlert})),e.isUserLoggedIn&&"ADMIN"===e.user.role&&n.a.createElement(n.a.Fragment,null,n.a.createElement($.a,{tabId:"product"},n.a.createElement(q,{showAlert:e.showAlert})),n.a.createElement($.a,{tabId:"orders"},n.a.createElement(oe,{showAlert:e.showAlert})))))},ue=a(221),ie=a(222);var de=function(e){var t=e.onSignInClick,a=e.onLogOutClick,r=e.isUserLoggedIn,c=e.user;return n.a.createElement("div",{className:"NavBar"},n.a.createElement(ue.a,{color:"light",light:!0,expand:"md"},n.a.createElement(ie.a,{href:"/"},n.a.createElement("span",{style:{color:"#940205"}},"Deliverypp")),n.a.createElement(Q.a,{className:"mr-auto",navbar:!0}),r?n.a.createElement("div",null,n.a.createElement("span",{className:"mr-1"},c.name),n.a.createElement(D.a,{outline:!0,title:"Salir",onClick:a,className:"mr-1"},n.a.createElement("i",{className:"fas fa-sign-out-alt"}))):n.a.createElement("div",null,n.a.createElement(D.a,{outline:!0,title:"Entrar",onClick:t,className:"mr-1"},n.a.createElement("i",{className:"fas fa-sign-in-alt"})))))};a(124);var me=function(){return n.a.createElement("footer",{className:"Footer"},n.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2020 Copyright:",n.a.createElement("a",{href:"/"}," Deliverypp.com")))},pe=a(224),ge=a(225),fe=a(226),Ee=a(227),ve=x.getPath(),he={generateErrorResponse:function(e){var t=e.message;return t.includes("401")&&(t="Credenciales incorrectas. Verifique que su usuario y contrase\xf1a son correctos."),{success:!1,status:"ERROR",message:t}},handleResponse:function(e){if(e&&e.data)return e.data},register:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.a.post("".concat(ve,"/api/register"),e);case 3:return r=a.sent,n=t.handleResponse(r),a.abrupt("return",n);case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",t.generateErrorResponse(a.t0));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},login:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.a.post("".concat(ve,"/api/login"),e);case 3:return r=a.sent,n=t.handleResponse(r),a.abrupt("return",n);case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",t.generateErrorResponse(a.t0));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},getUserByToken:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={Authorization:"Bearer ".concat(e)},a.next=4,k.a.get("".concat(ve,"/api/auth/").concat(e),r);case 4:return n=a.sent,c=t.handleResponse(n),a.abrupt("return",c);case 9:return a.prev=9,a.t0=a.catch(0),a.abrupt("return",t.generateErrorResponse(a.t0));case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},logout:function(e){var t=this;return Object(u.a)(s.a.mark((function a(){var r,n,c;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={Authorization:"Bearer ".concat(e)},a.next=4,k.a.get("".concat(ve,"/api/auth/").concat(e),r);case 4:return n=a.sent,c=t.handleResponse(n),a.abrupt("return",c);case 9:return a.prev=9,a.t0=a.catch(0),a.abrupt("return",t.generateErrorResponse(a.t0));case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()}},be=a(223);a(55);var Oe=function(e){return n.a.createElement("div",{className:"Loader"},n.a.createElement(be.a,{color:"light",style:{width:"4rem",height:"4rem"}}),n.a.createElement("span",{style:{color:"#fff"}}," Espere..."))};var we=function(e){var t=e.onLogin,a=void 0===t?function(){}:t,c=Object(r.useState)({username:!1,password:!1}),o=Object(i.a)(c,2),l=o[0],m=o[1],p=Object(r.useState)(""),g=Object(i.a)(p,2),f=g[0],E=g[1],v=Object(r.useState)(""),h=Object(i.a)(v,2),b=h[0],O=h[1],w=Object(r.useState)(!1),j=Object(i.a)(w,2),C=j[0],k=j[1],y=function(){var e=Object(u.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={username:f,password:b},k(!0),e.next=5,he.login(r);case 5:n=e.sent,setTimeout((function(){k(!1),a(n)}),1e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){if(!l[e]){var t=Object(d.a)({},l);t[e]=!0,m(t)}},N=!!f,x=!!b&&b.length>5;return n.a.createElement(pe.a,{className:"form position-relative p-2"},C&&n.a.createElement(Oe,null),n.a.createElement(ge.a,null,n.a.createElement(fe.a,null,n.a.createElement(B.a,{for:"username"},"Usuario"),n.a.createElement(L.a,{valid:l.username&&N,invalid:l.username&&!N,type:"text",name:"username",id:"username",value:f,onChange:function(e){S("username");var t=e.target.value;E(t)}}),l.username&&n.a.createElement(Ee.a,null,"El nombre de usuario no puede estar vac\xedo."))),n.a.createElement(ge.a,null,n.a.createElement(fe.a,null,n.a.createElement(B.a,{for:"password"},"Contrase\xf1a"),n.a.createElement(L.a,{valid:l.password&&x,invalid:l.password&&!x,type:"password",name:"password",id:"examplePassword",placeholder:"********",value:b,onChange:function(e){S("password");var t=e.target.value;O(t)}}),l.password&&n.a.createElement(Ee.a,null,"Introduce una contrase\xf1a de m\xe1s de 5 caracteres."))),n.a.createElement(D.a,{disabled:!(N&&x),onClick:y},"Entrar"))},je=a(69),Ce=a.n(je);var ke=function(e){var t=e.onRegister,a=void 0===t?function(){}:t,c=Object(r.useState)({username:!1,email:!1,password:!1,name:!1,telephone:!1}),o=Object(i.a)(c,2),l=o[0],m=o[1],p=Object(r.useState)(""),g=Object(i.a)(p,2),f=g[0],E=g[1],v=Object(r.useState)(""),h=Object(i.a)(v,2),b=h[0],O=h[1],w=Object(r.useState)(""),j=Object(i.a)(w,2),C=j[0],k=j[1],y=Object(r.useState)(""),S=Object(i.a)(y,2),N=S[0],x=S[1],I=Object(r.useState)(""),R=Object(i.a)(I,2),A=R[0],P=R[1],_=Object(r.useState)(""),T=Object(i.a)(_,2),U=T[0],M=T[1],q=Object(r.useState)(!1),z=Object(i.a)(q,2),G=z[0],H=z[1],W=function(){var e=Object(u.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={name:N,username:f,email:b,password:C,lastName:A,telephone:U},H(!0),e.next=5,he.register(r);case 5:(n=e.sent)&&n.token&&localStorage.setItem("deliverypp_user_login_token",n.token),F(),setTimeout((function(){H(!1),a(n)}),1e3);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){E(""),O(""),k(""),x(""),P(""),M(""),m({username:!1,email:!1,password:!1,name:!1,telephone:!1})},Q=function(e){if(!l[e]){var t=Object(d.a)({},l);t[e]=!0,m(t)}},V=!!b&&Ce.a.isEmail(b),J=!!f,K=!!N,$=!!C&&C.length>5,X=!!U&&10===U.length;return n.a.createElement(pe.a,{className:"form position-relative p-2"},G&&n.a.createElement(Oe,null),n.a.createElement(ge.a,null,n.a.createElement(fe.a,null,n.a.createElement(B.a,{for:"register_username"},"Usuario"),n.a.createElement(L.a,{valid:l.username&&J,invalid:l.username&&!J,type:"text",name:"register_username",id:"register_username",required:!0,value:f,onChange:function(e){Q("username");var t=e.target.value;E(t)}}),l.username&&n.a.createElement(Ee.a,null,"El nombre de usuario no puede estar vac\xedo."))),n.a.createElement(ge.a,null,n.a.createElement(fe.a,null,n.a.createElement(B.a,{for:"email"},"Email"),n.a.createElement(L.a,{valid:l.email&&V,invalid:l.email&&!V,type:"email",name:"email",id:"exampleEmail",placeholder:"youremail@email.com",required:!0,value:b,onChange:function(e){Q("email");var t=e.target.value;O(t)}}),l.email&&n.a.createElement(Ee.a,null,"Introduce un email v\xe1lido."))),n.a.createElement(ge.a,null,n.a.createElement(fe.a,null,n.a.createElement(B.a,{for:"password"},"Contrase\xf1a"),n.a.createElement(L.a,{valid:l.password&&$,invalid:l.password&&!$,type:"password",name:"password",id:"password",placeholder:"********",value:C,onChange:function(e){Q("password");var t=e.target.value;k(t)},required:!0}),l.password&&n.a.createElement(Ee.a,null,"Introduce una contrase\xf1a de m\xe1s de 5 caracteres."))),n.a.createElement(ge.a,null,n.a.createElement(fe.a,null,n.a.createElement(B.a,{for:"name"},"Nombre"),n.a.createElement(L.a,{valid:l.name&&K,invalid:l.name&&!K,type:"text",name:"name",id:"name",value:N,onChange:function(e){Q("name");var t=e.target.value;x(t)},required:!0}),l.name&&n.a.createElement(Ee.a,null,"El nombre no puede estar vac\xedo."))),n.a.createElement(ge.a,null,n.a.createElement(fe.a,null,n.a.createElement(B.a,{for:"lastname"},"Apellido"),n.a.createElement(L.a,{type:"text",name:"lastname",id:"lastname",value:A,onChange:function(e){var t=e.target.value;P(t)},required:!0}))),n.a.createElement(ge.a,null,n.a.createElement(fe.a,null,n.a.createElement(B.a,{for:"telephone"},"Tel\xe9fono"),n.a.createElement(L.a,{valid:l.telephone&&X,invalid:l.telephone&&!X,type:"number",name:"telephone",id:"telephone",value:U,onChange:function(e){Q("telephone");var t=e.target.value;M(t)},placeholder:"8095005000",required:!0}),l.name&&n.a.createElement(Ee.a,null,"Introduce un tel\xe9fono v\xe1lido."))),n.a.createElement(D.a,{disabled:!(V&&J&&K&&$&&X),onClick:W},"Registrarse"))};a(198);var ye=function(e){var t=Object(r.useState)("login"),a=Object(i.a)(t,2),c=a[0],o=a[1],l=function(e){c!==e&&o(e)},s="grey",u="grey";return"login"===c?s=e.color:"register"===c&&(u=e.color),n.a.createElement("div",{className:"RegisterLoginTab"},n.a.createElement(A.a,{isOpen:e.showModal},n.a.createElement(P.a,{toggle:e.toggle},"Entrar"),n.a.createElement(_.a,null,n.a.createElement(Q.a,{tabs:!0},n.a.createElement(V.a,null,n.a.createElement(J.a,{style:{cursor:"pointer"},className:"login"===c?"active":"",onClick:function(){l("login")}},"Entrar ",n.a.createElement("i",{className:"fas fa-user",style:{color:s}}))),n.a.createElement(V.a,null,n.a.createElement(J.a,{style:{cursor:"pointer"},className:"register"===c?"active":"",onClick:function(){l("register")}},"Registrarse ",n.a.createElement("i",{className:"fas fa-sign-in-alt",style:{color:u}})))),n.a.createElement(K.a,{activeTab:c},n.a.createElement($.a,{tabId:"login"},n.a.createElement(we,{onLogin:function(t){if(t?t&&!t.success&&e.showAlert({color:"warning",message:t.message}):e.showAlert({color:"warning",message:"Hubo un error durante el ingreso. Trate luego."}),t&&t.success&&t.response){var a=t.response;a.token&&(localStorage.setItem("deliverypp_user_login_token",a.token),e.toggle(),e.onLogin(a.user))}else e.showAlert({color:"warning",message:"Hubo un error durante el ingreso. Trate luego."})},color:e.color})),n.a.createElement($.a,{tabId:"register"},n.a.createElement(ke,{onRegister:function(t){t?t&&!t.success&&e.showAlert({color:"warning",message:t.message}):e.showAlert({color:"warning",message:"Hubo un error durante el registro. Trate luego."}),t&&t.success?o("login"):e.showAlert({color:"warning",message:"Hubo un error durante el registro. Trate luego."})},color:e.color}))))))},Se=a(228);var Ne=function(e){return n.a.createElement("div",{className:"Loader"},n.a.createElement(be.a,{type:"grow",color:"dark",style:{width:"4rem",height:"4rem"}}),n.a.createElement("span",{style:{color:"#fff"}}," Espere..."))},xe=a(70),Ie=a(21);function Re(){return n.a.createElement("div",null,"La p\xe1gina no fue encontrada")}var Ae=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(!1),l=Object(i.a)(o,2),d=l[0],m=l[1],p=Object(r.useState)("Registered"),g=Object(i.a)(p,2),f=g[0],E=g[1],v=Object(r.useState)("info"),h=Object(i.a)(v,2),b=h[0],O=h[1],w=Object(r.useState)(!0),j=Object(i.a)(w,2),C=j[0],k=j[1],y=Object(r.useState)(!1),S=Object(i.a)(y,2),N=S[0],x=S[1],I=Object(r.useState)({}),R=Object(i.a)(I,2),A=R[0],P=R[1];Object(r.useEffect)((function(){var e=localStorage.getItem("deliverypp_user_login_token");N||function(){var t=Object(u.a)(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.next=3,he.getUserByToken(e);case 3:(a=t.sent)&&a.response?(r=a.response,a.success&&(P(r),x(!0))):x(!1),setTimeout((function(){k(!1)}),1e3),t.next=11;break;case 8:x(!1),setTimeout((function(){k(!1)}),1e3),x(!1);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[N]);var _=function(e){var t=e.color,a=e.message;O(t),E(a),m(!0),setTimeout((function(){O("info"),m(!1),E("")}),3e3)};return C?n.a.createElement(Ne,null):n.a.createElement(xe.a,null,n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"alertContainer"},n.a.createElement(Se.a,{color:b,isOpen:d,toggle:function(){m(!1)}},f)),n.a.createElement(de,{isUserLoggedIn:N,user:A,onSignInClick:function(){return c(!0)},onLogOutClick:function(){k(!0);var e=localStorage.getItem("deliverypp_user_login_token");he.logout(e),localStorage.removeItem("deliverypp_user_login_token"),P({}),x(!1),setTimeout((function(){k(!1)}),1e3)},color:"#940205"}),a&&n.a.createElement(ye,{showModal:a,toggle:function(){c(!a)},color:"#940205",showAlert:_,onLogin:function(e){k(!0),P(e),x(!0),setTimeout((function(){k(!1)}),1e3)}}),n.a.createElement(Ie.c,null,n.a.createElement(Ie.a,{exact:!0,path:"/",component:function(){return n.a.createElement(se,{showAlert:_,color:"#940205",isUserLoggedIn:N,user:A})}}),n.a.createElement(Ie.a,{component:Re})),n.a.createElement(me,{color:"#940205"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(201);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){},73:function(e,t,a){e.exports=a(202)},78:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},84:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.814c978f.chunk.js.map